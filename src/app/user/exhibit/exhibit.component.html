<div id="page">

  <!-- App Bar -->
  <mat-toolbar class="mat-elevation-z4" style="display: flex">
    <a *ngIf="exhibit && exhibit.parentModel === 'Museum'"
       [routerLink]="'/museum'"
       routerLinkActive="active">
      <mat-icon>arrow_back</mat-icon>
    </a>
    <a *ngIf="exhibit && exhibit.parentModel === 'Exposition'"
       [routerLink]="'/exposition/' + exposition._id"
       routerLinkActive="active">
      <mat-icon>arrow_back</mat-icon>
    </a>

    <div style="flex-grow: 1"></div>

    <mat-menu #appMenu="matMenu">
      <div><a [href]="'/en' + this.router.url"><img class="ml-2" src="assets/images/en.png"/> Englisch</a></div>
      <div><a [href]="'/de' + this.router.url"><img class="ml-2" src="assets/images/de.png"/> Deutsch</a></div>
    </mat-menu>

    <button mat-icon-button [matMenuTriggerFor]="appMenu">
      <img [src]="'assets/images/' + locale + '.png'"/>
    </button>
  </mat-toolbar>

  <!-- Page Content -->
  <main>

    <!-- Carousel Section -->

    <section *ngIf="exhibit">
      <ngx-slick-carousel class="carousel" #slickModal="slick-carousel" [config]="slideConfig">
        <ng-container *ngIf="getExhibitContent(locale).images.length; else elsecase">
          <div ngxSlickItem
               *ngFor="let image of getExhibitContent(locale).images"
               class="slide">
            <div style="position: relative; padding-top: 61.8%">
              <div style="position: absolute; width: 100%; height: 100%; left: 0; top: 0">
                <img class="w-100 h-100" style="object-fit: contain; background-color: black"
                     [alt]="image.alternativeText"
                     [src]="'/uploads/' + exhibit._id + '/' + image.filename">
              </div>
            </div>
          </div>
        </ng-container>
        <ng-container #elsecase *ngIf="getExhibitContent('de').images.length">
          <ng-template>
            <div ngxSlickItem
                 *ngFor="let image of getExhibitContent('de').images"
                 class="slide">
              <div style="position: relative; padding-top: 61.8%">
                <div style="position: absolute; width: 100%; height: 100%; left: 0; top: 0">
              <img class="w-100" alt]="image.alternativeText"
                   [src]="'/uploads/' + exhibit._id + '/' + image.filename">
                </div>
              </div>
            </div>
          </ng-template>
        </ng-container>
      </ngx-slick-carousel>
    </section>


    <!-- Exhibit Title -->
    <h1 *ngIf="exhibit" class="mt-2 px-2">{{ getExhibitContent(locale).name }}</h1>

    <!-- Media Player Section -->
    <section *ngIf="exhibit">
      <div class="container">
        <div class="mx-auto">
          <!-- AUDIO -->
          <div class="mt-4" body *ngIf="getExhibitContent(locale).audio.length">
            <hr class="hl">
            <section class="player">
              <div class="phones">
                <fa-icon icon="headphones" size="lg"></fa-icon>
              </div>

              <app-audio-player [exhibit]="exhibit" [selectedLanguage]="locale"></app-audio-player>

              <div *ngIf="getExhibitContent(locale).transcript" style="text-align: center; margin-top: 2pt">
                <button (click)="openTranscript(transcriptModal)" aria-label="transcript">
                  <fa-icon class="fa-lg" icon="book-reader"></fa-icon>
                </button>
              </div>
              <ng-template #transcriptModal let-c="close" let-d="dismiss">
                <div class="modal-header" style="overflow-y: initial !important">
                  <h4 class="modal-title" id="modal-basic-title" i18n>Audio Transkript</h4>
                  <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body" style="overflow-y: auto; height:400pt;">
                  <p>{{getExhibitContent(locale).transcript.text}}</p>
                </div>
              </ng-template>
            </section>
          </div>
          <!-- VIDEO -->
          <div body *ngIf="getExhibitContent(locale).video.length">
            <hr class="hl">
            <section class="player">
              <div class="camera">
                <fa-icon icon="video" size="lg"></fa-icon>
              </div>

              <app-video-player [exhibit]="exhibit" [selectedLanguage]="locale"></app-video-player>

            </section>
          </div>
        </div>
      </div>
    </section>

    <p *ngIf="exhibit" class="p-2">{{getExhibitContent(locale).info}}</p>
  </main>

  <footer>
    <section *ngIf="exhibit" role="contentinfo">
      <nav class="bg-light" [attr.aria-label]="ariaLabelFooterNavigation">
        <div class="container">
          <div class="row">
            <div class="col-2 icons py-2 text-center">
              <fa-icon icon="heart" [ngClass]="{'liked' : likedFlag == true}" (click)="likeExhibit()"
                       [attr.aria-label]="ariaLabelLikeExhibit"></fa-icon>
            </div>
            <div class="col-8 input-group py-2">
              <div class="input-group-prepend">
                <button (click)="prevExhibit()" class="btn btn-outline-secondary" type="button"
                        [attr.aria-label]="ariaLabelPrevExhibit">
                  <fa-icon icon="chevron-left"></fa-icon>
                </button>
              </div>
              <input role="search" type="number" [(ngModel)]="filterNumber" class="form-control"
                     placeholder="Exponatnummer"
                     i18n-placeholder [attr.aria-label]="ariaLabelInputExhibitnumber">
              <div class="input-group-append">
                <button (click)="manualSelect()" class="btn btn-outline-secondary" type="button"
                        [attr.aria-label]="ariaLabelSearchExhibit">
                  <fa-icon icon="search-location"></fa-icon>
                </button>
                <button (click)="nextExhibit()" class="btn btn-outline-secondary" type="button"
                        [attr.aria-label]="ariaLabelNextExhibit">
                  <fa-icon icon="chevron-right"></fa-icon>
                </button>
              </div>
            </div>
            <div class="col-2 icons py-2 text-center">
              <fa-icon icon="comment-alt" (click)="openComment()" class="mr-2 ml-auto py-3"
                       [attr.aria-label]="ariaLabelOpenComment"></fa-icon>
            </div>
          </div>
        </div>
      </nav>
    </section>
  </footer>
</div>

<app-cookie-banner></app-cookie-banner>
